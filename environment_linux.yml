# PET-CT Radiomics Pipeline - Linux (GPU) Environment
# For CUDA GPU environments (e.g., workstations, HPC clusters)
#
# Usage:
#   conda env create -f environment_linux.yml
#   conda activate med_pet2
#
# Note: Adjust pytorch-cuda version to match your CUDA version

name: med_pet2
channels:
  - conda-forge
  - pytorch
  - nvidia
  - defaults

dependencies:
  # Python
  - python=3.10

  # --- Important: Version pinning ---
  # NumPy: Use 1.x series (NumPy 2.x is incompatible with PyTorch/TotalSegmentator)
  - numpy>=1.26,<2.0

  # PyTorch with CUDA: 2.2+ required for TotalSegmentator compatibility
  - pytorch>=2.2
  - torchvision
  - pytorch-cuda=12.1  # Adjust to match CUDA version (11.8, 12.1, 12.4, etc.)

  # Core libraries
  - pandas>=2.0
  - matplotlib>=3.7
  - pyyaml>=6.0
  - scipy>=1.10
  - scikit-learn>=1.3
  - scikit-image>=0.21
  - pillow>=10.0
  - tqdm

  # Medical image processing (conda-forge)
  - simpleitk>=2.3
  - nibabel>=5.0

  - pip
  - pip:
    # DICOM processing
    - pydicom>=2.4
    - dicom2nifti>=2.4
    - python-gdcm>=3.0

    # Segmentation
    - TotalSegmentator>=2.0,<3.0

    # Radiomics feature extraction
    - pyradiomics>=3.0,<4.0

    # Visualization
    - seaborn>=0.12
    - imageio>=2.30
